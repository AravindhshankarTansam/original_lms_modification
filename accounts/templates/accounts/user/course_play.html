{% extends "accounts/user/base.html" %}
{% load static %}

{% block title %}
Cybersecurity Analyst (200): Advanced Cybersecurity Skills for Manufacturing Environments
{% endblock %}

{% block extra_css %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="{% static 'css/course_play.css' %}" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

{% endblock %}

{% block content %}
<!-- ===== COURSE PAGE CONTENT ===== -->

<div class="catalog-toolbar">
  <div class="d-flex align-items-center gap-3">
    <div class="breadcrumb-custom">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
        <path d="M3 10h4l3 9 4-18 3 9h4" stroke="#c2c2c2" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <a href="{% url 'dashboard' %}" class="muted" style="text-decoration:none; color: inherit;">Dashboard</a>
      <span class="breadcrumb-separator">â€º</span>
      <a href="{% url 'courses_catalog' %}" class="muted" style="text-decoration:none; color: inherit;">Course Catalog</a>
      <span class="breadcrumb-separator">â€º</span>
       <span style="font-weight:600">{{ course.title }}</span>
    </div>
  </div>
</div>

<div class="course-header">
  {{ course.title }}
</div>


<div class="main-container">
  <!-- ===== VIDEO SECTION ===== -->

  <!-- ===== VIDEO SECTION ===== -->
  <div class="video-section">
<div class="video-container text-center position-relative">
  <video 
    id="lessonVideo"
    controls
    preload="metadata"
    controlsList="nodownload" 
    oncontextmenu="return false;"
  >
    <source src="{% static 'videos/network_segmentation.mp4' %}" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <!-- Custom 3-dot settings menu -->
  <div class="video-menu position-absolute">
    <button id="menuButton" class="menu-btn">â‹®</button>
    <div id="menuDropdown" class="menu-dropdown d-none">
      <div class="menu-item" id="pipMode">ðŸ“º Picture-in-Picture</div>
      <div class="menu-item">
        <label for="speedSelect" class="menu-label">ðŸŽž Playback Speed</label>
        <select id="speedSelect" class="menu-select">
          <option value="0.75">0.75x</option>
          <option value="1" selected>1x</option>
          <option value="1.25">1.25x</option>
          <option value="1.5">1.5x</option>
          <option value="2">2x</option>
        </select>
      </div>
    </div>
  </div>
</div>


    <!-- ===== TABS ===== -->
  <ul class="nav nav-tabs" id="courseTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview" type="button" role="tab">Overview</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="lesson-details-tab" data-bs-toggle="tab" data-bs-target="#lesson-details" type="button" role="tab">Lesson Details</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="resources-tab" data-bs-toggle="tab" data-bs-target="#resources" type="button" role="tab">Instructions</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button" role="tab">Reviews</button>
  </li>
  <!-- <li class="nav-item" role="presentation">
    <button class="nav-link" id="recommendations-tab" data-bs-toggle="tab" data-bs-target="#recommendations" type="button" role="tab">Recommendations</button>
  </li> -->
</ul>

<div class="tab-content" id="courseTabContent">
  <div class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview-tab">
    <p>Overview content here...</p>
  </div>
  <div class="tab-pane fade" id="lesson-details" role="tabpanel" aria-labelledby="lesson-details-tab">
    <p>Lesson details content here...</p>
  </div>
  <div class="tab-pane fade" id="resources" role="tabpanel" aria-labelledby="resources-tab">
    <p>Resources content here...</p>
  </div>
  <div class="tab-pane fade" id="reviews" role="tabpanel" aria-labelledby="reviews-tab">
    <p>Reviews content here...</p>
  </div>
  <div class="tab-pane fade" id="recommendations" role="tabpanel" aria-labelledby="recommendations-tab">
    <p>Recommendations content here...</p>
  </div>
</div>

  </div>

  <!-- ===== SIDEBAR ===== -->
<!-- ===== SIDEBAR ===== -->
<div class="course-sidebar">
  <!-- Progress -->
   
  <div class="progress-section mb-4">
    <label class="fw-semibold mb-1">Course Progress</label>
    <div class="progress-wrapper">
      <div class="progress-bar-custom" id="progressBar"></div>
    </div>
    <div class="small text-muted" id="progressText">0% Completed</div>
  </div>

  <!-- MODULE 1 -->
<!-- <div class="section mb-4">
  <h6>Module 1: {{ module.title|default:"No Module Available" }}</h6>
</div> -->

<!-- ===== MODULES ===== -->
{% if modules|length > 0 %}
  {% for module in modules %}
    <div class="section mb-4">
      <h6>{{ module.title }}</h6>

      <div class="chapter-block {% if not forloop.first %}locked{% endif %}">
        <ul class="lesson-list list-unstyled ms-2 mt-1">
          {% if module.chapters.all|length > 0 %}
            {% for chapter in module.chapters.all %}
              <li class="lesson-item" data-video="{{ chapter.video_file.url|default:'#' }}">
                <input type="checkbox" class="lesson-check">
                {{ chapter.title }}
              </li>
            {% endfor %}
          {% else %}
            <li class="lesson-item text-muted">No chapters in this module</li>
          {% endif %}
        </ul>
      </div>

    </div>
  {% endfor %}
{% else %}
  <p class="text-muted">No modules found in this course.</p>
{% endif %}


  <!-- COURSE TASK -->
  <!-- <div class="section">
    <h6>Course Tasks <span class="badge bg-danger small">0/1</span></h6>
    <div class="locked mt-2">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" width="16" height="16">
        <path d="M8 1a3 3 0 0 0-3 3v3h6V4a3 3 0 0 0-3-3zM5 7V4a3 3 0 0 1 6 0v3h1a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1z"/>
      </svg>
      <span class="ms-1">Course Evaluation</span>
    </div>
  </div> -->

</div>

</div>

{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'js/course_play.js' %}"></script>
{% endblock %}
